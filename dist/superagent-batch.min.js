function _toArray(t){return Array.isArray(t)?t:Array.from(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _slicedToArray=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(u){o=!0,i=u}finally{try{!n&&s["return"]&&s["return"]()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_get=function(t,e,r){for(var n=!0;n;){var o=t,i=e,a=r;s=c=u=void 0,n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;t=c,e=i,r=a,n=!0}};!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("url"),require("superagent")):"function"==typeof define&&define.amd?define(["url","superagent"],e):t.superagentBatch=e(t.url,t.request)}(this,function(t,e){"use strict";function r(t,e){this.req=t,this.text=e.body,this.statusText=e.statusMessage,this.setStatusProperties(parseInt(e.status)),this.header=this.headers=e.headers,this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text):null}function n(t){var e={},r=t.replace(new RegExp("[^]*?"+c),c),n=r.split(u),o=n.shift().split(" "),i=_toArray(o),a=(i[0],i[1]),s=i.slice(2);for(e.status=a,e.statusMessage=s.join(" "),e.headers={};""!==n[0];){var p=n.shift().split(": "),h=_slicedToArray(p,2),l=h[0],f=h[1];e.headers[l.toLowerCase()]=f}return n.shift(),e.body=n.shift(),e}function o(e){var r=[],n=t.parse(e.url),o=n.pathname,i=n.host,p=e._query.length?"?"+e._query.join("&"):"";if(r.push(s+a),r.push("Content-Type: application/http; msgtype=request"),r.push(""),r.push(e.method+" "+o+p+" "+c),null===i&&!window)throw"Couldn't determine host name for batched request";return r.push("Host: "+(i||window.location.host)),Object.keys(e.header).forEach(function(t){return r.push(t+": "+e.header[t])}),r.push(""),e._serializedData&&r.push(e._serializedData),r.push(""),r.join(u)}function i(t){var r=[],n=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),e}(e),i=n.Request.prototype.end;return n.endBatch=function(e){n.Request.prototype.end=i;var c=r.map(function(t){return o(t)});c.push(s+a+s),t.send(c.join(u)),t.end(function(t,n){var o=h(r,n);o.forEach(function(t){t.req._callback&&t.req._callback(t.toError(),t)}),e&&e(t,n)})},n.Request.prototype.end=function(t){if(this._data){var e=n.serialize[this.header[p]];this._serializedData=this.header[p]&&e?e(this._data):this._data}return this._callback=t,r.push(this),n},n}var a="1439751438138",s="--",u="\r\n",c="HTTP/1.1",p="Content-Type";r.prototype=e.Response.prototype;var h=h=function(t,e){var o="--"+/boundary="(.*)"/.exec(e.header[p.toLowerCase()])[1],i=e.text.split(o).filter(function(t){return t.replace(u,"")!==s&&t.replace(u,"").length}),a=i.map(function(e,o){var i=n(e);return new r(t[o],i)});return a},l=function(t){return t.Request.prototype.startBatch=function(){return this.set(p,"multipart/mixed; boundary="+a),i(this)},t},f=l;return f});
//# sourceMappingURL=superagent-batch.min.js.map